<p>&ndash;</p>

<p>记录一下自己在Mac下安装sklearn时遇到的问题和解决的方法，供大家参考。</p>

<p>注：MacBook Pro，系统是OS X EI Captain，Version 10.11.3</p>

<p>一、遇到的问题</p>

<p>安装scikit-learn：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pip install scikit-learn</span></code></pre></td></tr></table></div></figure>


<p>（Mac OS自带的Python，用brew工具装了pip）</p>

<p>安装完毕，打开Python，import sklearn，出错，主要错误如下：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>from sklearn import datasets</span></code></pre></td></tr></table></div></figure>


<p>错误提示：ValueError: numpy.dtype has the wrong size, try recompiling</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>from sklearn import svm</span></code></pre></td></tr></table></div></figure>


<p>错误提示：ImportError: cannot import name __check_build</p>

<p>用pip更新了sklearn还是不行
pip update sklearn</p>

<p>二、解决方法</p>

<p>1、sklearn对numpy包有依赖，因此索性更新了numpy、scipy：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pip update numpy
</span><span class='line'>pip update scipy</span></code></pre></td></tr></table></div></figure>


<p>2、然后卸载sklearn：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pip uninstall scikit-learn</span></code></pre></td></tr></table></div></figure>


<p>3、重新安装sklearn：</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>pip install scikit-learn --user python</span></code></pre></td></tr></table></div></figure>


<p>再次启动Python，再次import sklearn，不报错，成功。</p>

<p>注意如果第3步用pip install scikit-learn，就是不加<code>--user python</code>，会出错，出错信息如下：</p>

<p><img src="oserror.png" alt="" /></p>

<p>原因是 OS X El Capitan系统引入了System Integrity Protection，需要加<code>--user python</code>.</p>
